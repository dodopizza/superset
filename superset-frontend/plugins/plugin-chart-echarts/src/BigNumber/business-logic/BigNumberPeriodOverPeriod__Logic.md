# BigNumberPeriodOverPeriod - Бизнес логика

## Назначение
Компонент для сравнения числового показателя между двумя периодами времени с отображением абсолютного и процентного изменения.

## Основные параметры
- **Метрика** - числовое значение для сравнения
- **Тип сравнения** - период для сравнения (год, месяц, неделя, кастомный диапазон)
- **Формат числа** - настройка отображения чисел (D3 формат)
- **Формат процентного изменения** - настройка отображения разницы в процентах
- **Цветовая схема** - индикация роста/падения показателя
- **Размер шрифта** - основного числа и подзаголовка с разницей

## Логика работы
1. **Сравнение периодов**:
   - Расчет значений метрики для текущего и выбранного периода сравнения
   - Определение абсолютной и процентной разницы
   - Поддержка разных временных интервалов (год/год, месяц/месяц и т.д.)

2. **Отображение результатов**:
   - Основное число - значение метрики в текущем периоде
   - Подзаголовок - процентное изменение относительно периода сравнения
   - Цветовая индикация (зеленый/красный) для роста/падения показателя

3. **Форматирование**:
   - Настройка формата чисел (включая валюты)
   - Настройка точности отображения процентных изменений
   - Размеры шрифтов для разных элементов

## Особенности
1. Гибкие настройки сравнения:
   - Разные периоды сравнения (год, месяц, неделя, кастомный)
   - Кастомные временные диапазоны
   - Настройка цветовых схем:
     * Зеленый/красный для роста/падения
     * Возможность инвертировать цветовую схему
     * Настройка насыщенности цветов

2. Точный расчет изменений:
   - Корректная обработка нулевых значений
   - Правильный расчет процентных изменений
   - Поддержка разных форматов данных
   - Условное форматирование:
     * Настройка порогов для цветовой индикации
     * Форматирование процентных изменений
     * Пример конфигурации:
       ```json
       {
         "comparisonColorEnabled": true,
         "comparisonColorScheme": "green",
         "percentDifferenceFormat": "+,.2%"
       }
       ```

## Примеры использования
1. Сравнение выручки с предыдущим периодом
2. Анализ изменений KPI (конверсия, средний чек)
3. Мониторинг динамики ключевых показателей
