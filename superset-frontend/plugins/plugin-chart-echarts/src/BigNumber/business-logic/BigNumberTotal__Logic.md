# BigNumberTotal - Бизнес логика

## Назначение
Компонент для отображения одного числового значения (метрики) в виде крупного числа с возможностью настройки внешнего вида.

## Основные параметры
- **Метрика** - числовое значение для отображения
- **Подзаголовок** - текст под основным числом
- **Формат числа** - настройка отображения числа (D3 формат)
- **Формат даты** - если значение является датой/временем
- **Формат валюты** - для денежных значений
- **Размер шрифта** - основного числа и подзаголовка
- **Выравнивание** (DODO) - left/center/right

## Форматирование значений
1. Числовые значения форматируются согласно:
   - Заданному D3 формату
   - Валютному формату (если указан)
   - Настройкам колонки из datasource

2. Дата/время форматируются:
   - По выбранному формату даты
   - С учетом временного интервала (time grain)
   - Можно форсировать формат даты для числовых значений

3. Условное форматирование:
   - Изменение цвета числа по заданным правилам:
     * Настройка пороговых значений
     * Выбор цветов для разных диапазонов
     * Поддержка нескольких условий
   - Отображение сообщений при выполнении условий (DODO):
     * Настройка текста сообщения для каждого условия
     * Размер шрифта сообщения
     * Позиционирование сообщения
   - Пример конфигурации:
     ```json
     {
       "conditionalFormatting": [
         {
           "operator": ">",
           "threshold": 1000,
           "color": "green"
         },
         {
           "operator": "<",
           "threshold": 500,
           "color": "red",
           "message": "Значение ниже минимального"
         }
       ]
     }
     ```

## Особенности DODO
1. Дополнительные параметры:
   - Выравнивание текста (left/center/right)
   - Размер шрифта для сообщений условного форматирования
   - Расширенные настройки форматирования чисел
   - Опция "Export as time" - преобразует числовые значения в формат времени (ЧЧ:ММ:СС) при экспорте данных
   - Улучшенные настройки условного форматирования:
     * Дополнительные параметры в панели управления
     * Гибкая настройка цветов и сообщений
     * Поддержка нескольких условий

2. Улучшенное форматирование:
   - Поддержка форматов из datasource
   - Учет настроек колонок
   - Автоматическое преобразование числовых значений во временной формат при экспорте

## Примеры использования
1. Показатель KPI (выручка, количество пользователей)
2. Отображение текущего значения метрики
3. Индикаторы состояния с условным форматированием
